"use strict";(self.webpackChunkoverreact_docs=self.webpackChunkoverreact_docs||[]).push([[210],{962:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var o=n(5893),s=n(1151);const a={sidebar_position:1},r="Understanding the Game Loop",i={id:"guides/game-loop",title:"Understanding the Game Loop",description:"With React, we build apps at a high level of abstraction. We leave it to take care of the heavy lifting. Instead, we write code that responds to events, such as key presses, button clicks, and fetch request responses.",source:"@site/docs/guides/game-loop.md",sourceDirName:"guides",slug:"/guides/game-loop",permalink:"/docs/guides/game-loop",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Tutorial",permalink:"/docs/getting-started/tutorial"},next:{title:"Passing Props",permalink:"/docs/guides/passing-props"}},l={},d=[{value:"Under the hood",id:"under-the-hood",level:2},{value:"See also",id:"see-also",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"understanding-the-game-loop",children:"Understanding the Game Loop"}),"\n",(0,o.jsx)(t.p,{children:"With React, we build apps at a high level of abstraction. We leave it to take care of the heavy lifting. Instead, we write code that responds to events, such as key presses, button clicks, and fetch request responses."}),"\n",(0,o.jsx)(t.p,{children:"This works well for general web development, but when building a game we typically need to run some code frame-by-frame."}),"\n",(0,o.jsx)(t.p,{children:"Take, for example, the humble platform game. In it, the player has a position, represented as coordinates. The player also has a velocity, such as if they are running or falling. Each frame, we must update the player's position based on their current position and their velocity. In addition, we must apply the effects of gravity to the player's velocity."}),"\n",(0,o.jsx)(t.p,{children:"In other words, we take the current game state, and play it forwards by the amount of time that has elapsed since the previous frame. And once that is done, we can render all of the game objects to screen. Then the cycle repeats."}),"\n",(0,o.jsxs)(t.p,{children:["In ",(0,o.jsx)(t.em,{children:"Overreact"})," the ",(0,o.jsx)(t.a,{href:"../components/engine",children:(0,o.jsx)(t.code,{children:"Engine"})})," component initializes the game loop for us."]}),"\n",(0,o.jsx)(t.h2,{id:"under-the-hood",children:"Under the hood"}),"\n",(0,o.jsxs)(t.p,{children:["Internally, the game loop uses ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame",children:(0,o.jsx)(t.code,{children:"requestAnimationFrame"})}),". Here's a simplified version of what it looks like:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"function loop(time: number) {\n  const delta = previousTime - time;\n\n  if (!paused) {\n    update(delta);\n  }\n\n  render(delta);\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Every frame, the engine invokes all of the registered update functions, followed by all of the render functions. Child components can register update and render functions using the ",(0,o.jsx)(t.a,{href:"../hooks/use-update",children:(0,o.jsx)(t.code,{children:"useUpdate"})})," and ",(0,o.jsx)(t.a,{href:"../hooks/use-render",children:(0,o.jsx)(t.code,{children:"useRender"})})," hooks respectively."]}),"\n",(0,o.jsx)(t.p,{children:"It is worth taking a moment to appreciate the game loop, as it is at the heart of everything you'll do as you build a game."}),"\n",(0,o.jsx)(t.h2,{id:"see-also",children:"See also"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["MDN has an excellent article on game loops: ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Games/Anatomy",children:"https://developer.mozilla.org/en-US/docs/Games/Anatomy"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>r});var o=n(7294);const s={},a=o.createContext(s);function r(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);